import{e as x,s as m,f as _,l as y,k as N,r as i,o as V,c as k,h as p,a as t,w as r,u as l,i as E,t as L,p as P,m as T,n as D,x as G}from"./index.6ffd9326.js";import{b as H}from"./index.13956395.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as K,F as O}from"./Footer.07a683df.js";const Q=F=>(P("data-v-aa92b992"),F=F(),T(),F),W={class:"register"},X={class:"register_box"},Y={style:{margin:"auto"}},ee={style:{height:"100px"}},ue=Q(()=>p("span",{id:"msg",style:{"font-size":"15px",margin:"auto auto 0 0",display:"none",color:"yellow"}},"\u5934\u50CF\u4E0A\u4F20\u6210\u529F\uFF01",-1)),te=E("\u4E0A\u4F20\u5934\u50CF"),ae=E("\u6CE8\u518C"),le=x({setup(F){m.state.host;let n=_(),g=_();const f=_(""),c=_(),e=y({name:"",user:"",pwd:"",checkpwd:"",gender:"\u672A\u77E5",avatar:"src/assets/add_img.png",avatar_img:"",code:"",send:"\u53D1\u9001\u9A8C\u8BC1\u7801"});N(()=>{n.value=document.getElementById("input"),g.value=document.getElementById("msg")});const w=(o,u,a)=>{if(u==="")a(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"));else{if(e.checkpwd!==""){if(!c.value)return;c.value.validateField("checkpwd",()=>null)}a()}},z=(o,u,a)=>{u===""?a(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01")):u!==e.pwd?a(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF01")):a()},A=/^[1][3,4,5,6,7,8][0-9]{9}$/,b=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,I=y({user:[{required:!0,message:"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A\uFF01",trigger:"blur"},{validator:(o,u,a)=>{!A.test(u)&&!b.test(u)?a(new Error("\u683C\u5F0F\u9519\u8BEF,\u8BF7\u68C0\u67E5\uFF01")):a()},trigger:"blur"}],name:[{required:!0,message:"\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:1,max:5,message:"\u6635\u79F0\u5B57\u7B26\u6570\u9650\u5236\u4E3A1\u52305\u4E2A\u5B57\u7B26",trigger:"blur"}],pwd:[{validator:w,trigger:"blur"}],checkpwd:[{validator:z,trigger:"blur"}],gender:[{required:!1}],avatar:[{validator:(o,u,a)=>{u==="src/assets/add_img.png"?a(new Error("\u8BF7\u4F20\u5165\u5934\u50CF\uFF0C\u4E14\u6700\u5927\u4E0D\u8D85\u8FC71M\uFF01")):a()},tirgger:"blur"}]});let h,v=_(!1);const S=()=>{e.send=(parseInt(e.send)-1).toString(),e.send==="0"&&(e.send="\u53D1\u9001\u9A8C\u8BC1\u7801",clearInterval(h),v.value=!1)},U=async()=>{b.test(e.user)?(await D.post("/manage/code/email",{email:e.user})).data.code===200?alert("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF0C\u6709\u6548\u671F5\u5206\u949F\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\uFF01"):alert("\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u53D1\u9001\uFF0C\u82E5\u4E00\u76F4\u5931\u8D25\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\uFF01"):A.test(e.user)&&alert("\u6682\u65F6\u6CA1\u6709\u5E03\u7F6E\u624B\u673A\u9A8C\u8BC1\u7801\u63A5\u53E3\uFF0C\u8BF7\u5FFD\u7565\u9A8C\u8BC1\u7801\u76F4\u63A5\u6CE8\u518C\uFF01"),v.value=!0,e.send="60",h=setInterval(S,1e3)},$=()=>{n.value.files[0]?n.value.files[0].size>1024*2048?alert("\u6587\u4EF6\u4F53\u79EF\u8FC7\u5927\uFF01"):o():alert("\u8BF7\u5148\u9009\u62E9\u56FE\u7247\uFF01");function o(){let u=new FormData;u.append("avatar",n.value.files[0],n.value.files[0].name),D.post("/web/avatar_upload",u).then(a=>{e.avatar_img=a.data,g.value.style.display="block",console.log(e.avatar_img)}).catch(a=>console.log(a))}console.log(n.value.files[0])},R=async o=>{o.target.files[0]&&(o.target.files[0].size>1024e3?alert("\u56FE\u7247\u5927\u5C0F\u6700\u9AD8\u4E3A1M\uFF01"):(e.avatar=await H.getBase64(o.target.files[0]),console.log(o.target.files)))},Z=o=>{!o||o.validate(async u=>{if(u){console.log(e);const a=await m.dispatch("postRegister",{name:e.name,user:e.user,code:e.code,pwd:e.pwd,gender:e.gender,avatar:e.avatar_img});console.log(a)}else return console.log("error submit!"),!1})};return(o,u)=>{const a=i("el-input"),d=i("el-form-item"),B=i("el-button"),C=i("el-option"),q=i("el-select"),j=i("el-image"),M=i("el-form");return V(),k("div",W,[p("div",X,[p("div",Y,[t(M,{ref_key:"ruleFormRef",ref:c,model:l(e),rules:l(I),size:f.value,class:"demo-ruleForm","label-width":"80px",style:{width:"400px",margin:"10px auto"}},{default:r(()=>[t(d,{label:"\u6635\u79F0",prop:"name"},{default:r(()=>[t(a,{modelValue:l(e).name,"onUpdate:modelValue":u[0]||(u[0]=s=>l(e).name=s),placeholder:"\u4E3A\u81EA\u5DF1\u53D6\u4E00\u4E2A\u65B0\u540D\u5B57"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u8D26\u53F7",prop:"user"},{default:r(()=>[t(a,{modelValue:l(e).user,"onUpdate:modelValue":u[1]||(u[1]=s=>l(e).user=s),placeholder:"\u8BF7\u8F93\u516511\u4F4D\u624B\u673A\u53F7\u6216\u8005\u90AE\u7BB1"},null,8,["modelValue"]),t(B,{disabled:l(v),style:{width:"80px"},onClick:U},{default:r(()=>[E(L(l(e).send),1)]),_:1},8,["disabled"])]),_:1}),t(d,{label:"\u9A8C\u8BC1\u7801"},{default:r(()=>[t(a,{modelValue:l(e).code,"onUpdate:modelValue":u[2]||(u[2]=s=>l(e).code=s),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7\u540E\u70B9\u51FB\u83B7\u53D6\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u5BC6\u7801",prop:"pwd"},{default:r(()=>[t(a,{modelValue:l(e).pwd,"onUpdate:modelValue":u[3]||(u[3]=s=>l(e).pwd=s),autocomplete:"off",type:"password"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"checkpwd"},{default:r(()=>[t(a,{modelValue:l(e).checkpwd,"onUpdate:modelValue":u[4]||(u[4]=s=>l(e).checkpwd=s),autocomplete:"off",type:"password"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u6027\u522B",prop:"gender"},{default:r(()=>[t(q,{modelValue:l(e).gender,"onUpdate:modelValue":u[5]||(u[5]=s=>l(e).gender=s)},{default:r(()=>[t(C,{label:"\u672A\u77E5",value:"\u672A\u77E5"}),t(C,{label:"\u7537",value:"\u7537"}),t(C,{label:"\u5973",value:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),t(d,{lable:"\u5934\u50CF",prop:"avatar"},{default:r(()=>[p("label",ee,[p("input",{id:"input",accept:"image/png, image/bmp, image/jpg, image/jpeg",style:{display:"none"},type:"file",onChange:R},null,32),t(j,{src:l(e).avatar,"onUpdate:src":u[6]||(u[6]=s=>l(e).avatar=s),fit:"cover",style:{width:"100px",height:"100px","background-color":"rgb(214 214 214 / 52%)"}},null,8,["src"])]),ue]),_:1}),t(d,null,{default:r(()=>[t(B,{onClick:$},{default:r(()=>[te]),_:1}),t(B,{type:"primary",onClick:u[7]||(u[7]=s=>Z(c.value))},{default:r(()=>[ae]),_:1})]),_:1})]),_:1},8,["model","rules","size"])])])])}}});var oe=J(le,[["__scopeId","data-v-aa92b992"]]);const se={style:{"max-width":"1100px","background-color":"#97d5d9b5","min-width":"825px",margin:"auto"}},re={class:"Login"},Fe=x({setup(F){const n=m.state.host,g=m.state.tabbar,f=m.state.footer,c=m.state.logo;return(e,w)=>(V(),k("div",{style:G("background-image: url("+l(n)+":3001/background_login.jpg)")},[p("div",se,[p("div",re,[t(K,{logo:l(c),path:l(g)},null,8,["logo","path"]),t(oe)]),t(O,{footer:l(f)},null,8,["footer"])])],4))}});export{Fe as default};
