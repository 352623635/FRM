import{T as V}from"./Tinymce.e09f18c5.js";import{l as g,r as n,o as f,c as b,h as d,a as e,w as s,u as o,i as h,n as k,e as $,s as i,d as q,S as B,x as C}from"./index.4fc00ea9.js";import{g as S}from"./base64.04d59941.js";import{_ as T,F as U}from"./Footer.3ead6832.js";import"./plugin-vue_export-helper.21dcd24c.js";const N={style:{margin:"60px auto","border-style":"groove","border-radius":"5px"}},z={style:{margin:"30px 20px"}},E=h(" \u786E\u8BA4\u4E0A\u4F20 "),F={setup(x){sessionStorage.token||(alert("\u672A\u767B\u5F55\u4E0D\u53EF\u64CD\u4F5C\uFF01"),window.location.href="#/login");const t=g({title:"",preface:"",type:"\u65E0",text:""}),p=g({title:[{required:!0,message:"\u6807\u9898\u4E0D\u53EF\u7559\u7A7A\uFF01",trigger:"blur"},{min:3,max:20,message:"\u6807\u9898\u5B57\u7B26\u6570\u9650\u5236\u4E3A3\u523020\u4E2A\u5B57\u7B26",trigger:"blur"}],type:[{required:!1}],preface:[{required:!0,message:"\u524D\u8A00\u4E0D\u53EF\u7559\u7A7A\uFF01",trigger:"blur"},{min:5,max:60,message:"\u524D\u8A00\u5B57\u7B26\u6570\u9650\u5236\u4E3A5\u523060\u4E2A\u5B57\u7B26",trigger:"blur"}],text:[{required:!0,message:"\u5185\u5BB9\u4E0D\u53EF\u7559\u7A7A\uFF01",trigger:"blur"}]}),m=async()=>{console.log(t);const r=(await k.post("/web/essay/essay_upload",{title:t.title,text:t.text,type:t.type,preface:t.preface})).data;if(r.code===400)alert(r.msg);else{const l=S.encode(r.data.insertId);setTimeout(window.location.href=`#/essay_body?id=${l}`,1e3)}};return(r,l)=>{const c=n("el-input"),_=n("el-form-item"),u=n("el-option"),y=n("el-select"),v=n("el-form"),w=n("el-button");return f(),b("div",N,[d("div",z,[e(v,{model:o(t),"label-width":"60px",rules:o(p)},{default:s(()=>[e(_,{label:"\u6807\u9898",prop:"title"},{default:s(()=>[e(c,{modelValue:o(t).title,"onUpdate:modelValue":l[0]||(l[0]=a=>o(t).title=a),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF0C3\u523020\u4E2A\u5B57\u7B26\u4E4B\u95F4"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u524D\u8A00",prop:"preface"},{default:s(()=>[e(c,{modelValue:o(t).preface,"onUpdate:modelValue":l[1]||(l[1]=a=>o(t).preface=a),placeholder:"\u8BF7\u8F93\u5165\u524D\u8A00\uFF0C5\u523060\u4E2A\u5B57\u7B26\u4E4B\u95F4"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u7C7B\u522B",prop:"type"},{default:s(()=>[e(y,{modelValue:o(t).type,"onUpdate:modelValue":l[2]||(l[2]=a=>o(t).type=a)},{default:s(()=>[e(u,{label:"\u65E0",value:"\u65E0"}),e(u,{label:"\u5173\u4E8E\u81EA\u6211",value:"\u5173\u4E8E\u81EA\u6211"}),e(u,{label:"\u79D1\u666E",value:"\u79D1\u666E"}),e(u,{label:"\u6559\u80B2",value:"\u6559\u80B2"}),e(u,{label:"\u60C5\u7EEA",value:"\u60C5\u7EEA"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),d("div",null,[e(V,{value:o(t).text,"onUpdate:value":l[3]||(l[3]=a=>o(t).text=a)},null,8,["value"]),e(w,{onClick:l[4]||(l[4]=a=>m())},{default:s(()=>[E]),_:1})])])])}}};const j={style:{"max-width":"1100px","background-color":"#97d5d9b5","min-width":"825px",margin:"auto"}},I={style:{width:"91%",margin:"auto"}},K=$({setup(x){const t=i.state.host,p=i.state.tabbar,m=i.state.footer,r=i.state.logo;return(l,c)=>(f(),b("div",{style:C("background-image: url("+o(t)+":3001/background.jpg);background-size: cover;")},[d("div",j,[d("div",I,[e(T,{logo:o(r),path:o(p)},null,8,["logo","path"]),(f(),q(B,null,{default:s(()=>[e(F)]),_:1})),e(U,{footer:o(m)},null,8,["footer"])])])],4))}});export{K as default};
